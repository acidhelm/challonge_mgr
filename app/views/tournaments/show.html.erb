<p id="notice"><%= notice %></p>

<p>
  <strong>Description:</strong>
  <%= @tournament.description %>
</p>

<p>
  <strong>Challonge ID:</strong>
  <%= @tournament.challonge_id %>
</p>

<p>
  <strong>Name:</strong>
  <%= @tournament.name %>
</p>

<p>
  <strong>State:</strong>
  <%= @tournament.state %>
</p>

<p>
  <strong>Type:</strong>
  <%= @tournament.tournament_type %>
</p>

<p>
  <strong>Challonge URL:</strong>
  <%= @tournament.challonge_url %>
</p>

<p>
  <strong>User:</strong>
  <%= @tournament.user.user_name %>
</p>

<p><strong>Teams:</strong>
<ul>
  <% @tournament.teams.order(seed: :asc).each do |t| %>
    <li>(<%= t.seed %>) <%= t.name %></li>
  <% end %>
</ul>
</p>

<p><strong>Matches:</strong>
<ul>
  <% @tournament.matches.order(suggested_play_order: :asc).each do |m| %>
    <% if m.team1_id
           team1_name = @tournament.teams.find_by(challonge_id: m.team1_id).name
       else
           winner_or_loser = m.team1_is_prereq_match_loser ? "Loser" : "Winner"
           match_num = Match.find_by(challonge_id: m.team1_prereq_match_id).suggested_play_order
           team1_name = "#{winner_or_loser} of match #{match_num}"
       end
    %>
    <% if m.team2_id
           team2_name = @tournament.teams.find_by(challonge_id: m.team2_id).name
       else
           winner_or_loser = m.team2_is_prereq_match_loser ? "Loser" : "Winner"
           match_num = Match.find_by(challonge_id: m.team2_prereq_match_id).suggested_play_order
           team2_name = "#{winner_or_loser} of match #{match_num}"
       end
    %>
    <% if @tournament.tournament_type == "double elimination"
           winners_or_losers = m.round > 0 ? "Winners'" : "Losers'"
           round = "#{winners_or_losers} round #{m.round.abs}"
      else
           round = "Round #{m.round.abs}"
      end
    %>
    <li>
        <%= "##{m.suggested_play_order} - #{team1_name} vs. #{team2_name} - #{round}" %>
    </li>
  <% end %>
</ul>
</p>

<%= link_to 'Back', tournament_index_path(user: @tournament.user.id) %>
